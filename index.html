<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>FittingBox VTO Advanced Demo</title>
    <style>
      #my-fitmix-container {
        width: 660px;
        height: 560px;
        margin: auto;
        border: 1px solid #ccc;
      }
      .status {
        text-align: center;
        margin: 10px;
        font-weight: bold;
      }
      .btns {
        text-align: center;
        margin-top: 20px;
      }
      .btns button {
        margin: 0 5px;
        padding: 8px 16px;
        font-size: 14px;
        cursor: pointer;
      }
    </style>
    <!-- Load FittingBox FitMix SDK -->
    <script
      src="https://static.fittingbox.com/api/v1/fitmix.js"
      type="text/javascript"
    ></script>
  </head>
  <body>
    <div class="status" id="statusMessage">Loading VTO...</div>
    <div id="my-fitmix-container"></div>

    <div class="btns">
      <button id="btnFrame1">Frame 1</button>
      <button id="btnFrame2">Frame 2</button>
      <button id="btnFrame3">Frame 3</button>
      <button id="btnSnapshot">Take Snapshot</button>
    </div>

    <div id="snapshotResult" style="text-align: center; margin-top: 20px;"></div>

    <script>
      let fitmixInstance;
      const statusMessage = document.getElementById("statusMessage");

      function updateStatus(msg) {
        statusMessage.textContent = msg;
      }

      window.onload = function () {
        const params = {
          apiKey: "TBVAcXitApiZPVH791yxdHbAc8AKzBwtCnjtv6Xn", // ✅ आपकी demo key
          lang: "en",
          onSnapshot: function (data) {
            const img = document.createElement("img");
            img.src = data.dataUrl;
            img.width = 300;
            document.getElementById("snapshotResult").innerHTML = "";
            document.getElementById("snapshotResult").appendChild(img);
            updateStatus("Snapshot done");
          },
        };

        // Widget create करो
        fitmixInstance = FitMix.createWidget(
          "my-fitmix-container",
          params,
          function () {
            updateStatus("VTO ready ✅");

            // By default पहला frame load कर दो
            fitmixInstance.setFrame("8053672909258");
          }
        );

        // Frame switch buttons
        document
          .getElementById("btnFrame1")
          .addEventListener("click", () => {
            fitmixInstance.setFrame("8053672909258");
            updateStatus("Frame 1 loaded");
          });

        document
          .getElementById("btnFrame2")
          .addEventListener("click", () => {
            fitmixInstance.setFrame("0888392486523");
            updateStatus("Frame 2 loaded");
          });

        document
          .getElementById("btnFrame3")
          .addEventListener("click", () => {
            fitmixInstance.setFrame("8056597233958");
            updateStatus("Frame 3 loaded");
          });

        // Snapshot button
        document
          .getElementById("btnSnapshot")
          .addEventListener("click", () => {
            fitmixInstance.getSnapshot();
            updateStatus("Taking snapshot...");
          });
      };
    </script>
  </body>
</html>
